
/* ===== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ì–ê–õ–ï–†–ï–ò ===== */
/* 
üì∏ –ù–ê–°–¢–†–û–ô–ö–ê –§–û–¢–û–ì–ê–õ–ï–†–ï–ò:

–°–ü–û–°–û–ë 1 - –ó–ê–ì–†–£–ó–ö–ê –°–û–ë–°–¢–í–ï–ù–ù–´–• –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô:
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É "images" –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–∫–ª–∏–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí New Folder)
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ —ç—Ç—É –ø–∞–ø–∫—É (–ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã –∏–ª–∏ Upload)
3. –ó–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ –Ω–∏–∂–µ –Ω–∞ ./images/–≤–∞—à–µ-—Ñ–æ—Ç–æ.jpg

–°–ü–û–°–û–ë 2 - –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –í–ù–ï–®–ù–ò–• –°–°–´–õ–û–ö:
–ó–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ –Ω–∞ –ø–æ–ª–Ω—ã–µ URL:
{ src: "https://–≤–∞—à-—Å–∞–π—Ç.ru/—Ñ–æ—Ç–æ.jpg", alt: "–û–ø–∏—Å–∞–Ω–∏–µ" }

–ù–ê–°–¢–†–û–ô–ö–ò:
- src: –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
- alt: –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤ –∏ –ª—é–¥–µ–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏

–ü–û–î–î–ï–†–ñ–ò–í–ê–ï–ú–´–ï –§–û–†–ú–ê–¢–´: .jpg, .jpeg, .png, .webp
–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –†–ê–ó–ú–ï–†–´: 
- –ú–∏–Ω–∏–º—É–º: 800x600 –ø–∏–∫—Å–µ–ª–µ–π
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: 1200x800 –ø–∏–∫—Å–µ–ª–µ–π  
- –ú–∞–∫—Å–∏–º—É–º: 2000x1500 –ø–∏–∫—Å–µ–ª–µ–π (–¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)

–î–û–ë–ê–í–õ–ï–ù–ò–ï –ù–û–í–´–• –§–û–¢–û:
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É { src: "...", alt: "..." }, –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –º–∞—Å—Å–∏–≤
*/
const galleryImages = [
    {
        src: "./images/abstraktnaa-kompozicia-uf-ul-trafioleta.jpg",
        alt: "–ü–∞—Ä–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –Ω–∞ –ø–∏–ª–æ–Ω–µ"
    },
    {
        src: "./images/abstraktnaa-kompozicia-uf-ul-trafioleta (1).jpg",
        alt: "Break dance freeze"
    },
    {
        src: "./images/abstraktnaa-kompozicia-uf-ul-trafioleta (2).jpg",
        alt: "–≠–ª–µ–º–µ–Ω—Ç—ã —Ä–∞—Å—Ç—è–∂–∫–∏ –Ω–∞ –ø–æ–ª—É"
    },
    {
        src: "./images/cherries-9879407_1280.jpg",
        alt: "–ö–æ–º–∞–Ω–¥–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ"
    },
    {
        src: "./images/christmas-6832792_1280.jpg",
        alt: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∑–∞–Ω—è—Ç–∏–µ –≤–∑—Ä–æ—Å–ª–æ–π –≥—Ä—É–ø–ø—ã"
    },
    {
        src: "./images/mahonia-9895458_1280.jpg",
        alt: "–ì—Ä—É–ø–ø–∞ –¥–µ—Ç–µ–π –Ω–∞ –∑–∞–Ω—è—Ç–∏–∏"
    }
];

/* ===== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –í–ò–î–ï–û –ì–ê–õ–ï–†–ï–ò ===== */
/*
üé¨ –ö–ê–ö –ù–ê–°–¢–†–û–ò–¢–¨ –í–ò–î–ï–û –° –í–ö–û–ù–¢–ê–ö–¢–ï:

1. –ü–æ–ª—É—á–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∏–¥–µ–æ –Ω–∞ vk.com
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—É—é —Å—Å—ã–ª–∫—É. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã:
     * https://vk.com/video-123456_789012345 (–≥—Ä—É–ø–ø–∞)
     * https://vk.com/video123456_789012345 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
     * https://vkvideo.ru/video-123456_789012345 (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
   - –§–æ—Ä–º–∞—Ç: video{owner_id}_{video_id}
     –≥–¥–µ owner_id –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –≥—Ä—É–ø–ø (–Ω–∞–ø—Ä–∏–º–µ—Ä, -123456)
     –∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 123456)

2. –î–æ–±–∞–≤—å—Ç–µ –≤ –æ–±—ä–µ–∫—Ç videoCategories:
   - vkVideoUrl: "–ü–û–õ–ù–ê–Ø_–°–°–´–õ–ö–ê" (–Ω–∞–ø—Ä–∏–º–µ—Ä, "https://vk.com/video-123456_789012345" –∏–ª–∏ "https://vkvideo.ru/video-123456_789012345")
   - thumbnail: –ø—É—Ç—å –∫ –≤–∞—à–µ–π –∫–∞—Å—Ç–æ–º–Ω–æ–π –ø—Ä–µ–≤—å—é-–∫–∞—Ä—Ç–∏–Ω–∫–µ (–ù–ï –ø—Ä–µ–≤—å—é VK!)
   - title –∏ description: –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ

3. –ü–†–ò–ú–ï–†:
   {
       id: 1,
       title: "–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ",
       description: "–û–ø–∏—Å–∞–Ω–∏–µ",
       thumbnail: "./images/my-video-preview.jpg",  // –í–∞—à–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞
       vkVideoUrl: "https://vk.com/video-123456_789012345"  // –ò–ª–∏ https://vkvideo.ru/video-123456_789012345
   }

–í–ê–ñ–ù–û:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ (–Ω–µ —Ç–æ–ª—å–∫–æ ID)
- –î–ª—è –≥—Ä—É–ø–ø owner_id –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –º–∏–Ω—É—Å–∞)
- –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π owner_id –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π
- –ü—Ä–µ–≤—å—é –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏, –Ω–µ –ø—Ä–µ–≤—å—é VK

–î–û–ë–ê–í–õ–ï–ù–ò–ï –í–ò–î–ï–û:
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±—ä–µ–∫—Ç { id, title, description, thumbnail, vkVideoUrl } –≤ –Ω—É–∂–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é.
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: breakdance, stretching, pole, kids. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –∫–∞—Ä—Ç–æ—á–∫–∏.
- –ß—Ç–æ–±—ã –∫–∞—Ä—Ç–æ—á–∫–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–ì–∞–ª–µ—Ä–µ—è –º–æ–º–µ–Ω—Ç–æ–≤¬ª –æ—Ç–∫—Ä—ã–≤–∞–ª–∞ –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é,
  –¥–æ–±–∞–≤—å—Ç–µ data-video-category="–∏–º—è_–∫–∞—Ç–µ–≥–æ—Ä–∏–∏" –≤ index.html.
*/
const videoCategories = {
    breakdance: [
        {
            id: 1,
            title: "–§–∏–Ω–∞–ª –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ –±–∞—Ç—Ç–ª–∞",
            description: "–õ—É—á—à–∏–µ —Å–≤—è–∑–∫–∏ –∏ freeze —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç –∫–æ–º–∞–Ω–¥—ã Steel Brothers.",
            thumbnail: "./images/abstraktnaa-kompozicia-uf-ul-trafioleta (1).jpg",
            vkVideoUrl: "https://vk.com/video-123456_789012345"  // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É VK
        },
        {
            id: 2,
            title: "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø–æ power moves",
            description: "–†–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –≤—Ä–∞—â–µ–Ω–∏—è–º–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –Ω–∞ –ø–æ–ª—É.",
            thumbnail: "https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=600&q=80",
            vkVideoUrl: "https://vk.com/video-123456_789012346"  // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É VK
        },
        {
            id: 3,
            title: "–ö–æ–º–∞–Ω–¥–Ω—ã–π showcase",
            description: "–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ –Ω–∞ –≥–æ—Ä–æ–¥—Å–∫–æ–º —Ñ–µ—Å—Ç–∏–≤–∞–ª–µ —É–ª–∏—á–Ω–æ–π –∫—É–ª—å—Ç—É—Ä—ã.",
            thumbnail: "https://images.unsplash.com/photo-1550259114-f43da83ca5d7?auto=format&fit=crop&w=600&q=80",
            vkVideoUrl: "https://vk.com/video-123456_789012347"  // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É VK
        }
    ],
    stretching: [
        {
            id: 4,
            title: "–†–∞—Å—Ç—è–∂–∫–∞ –Ω–∞ —à–ø–∞–≥–∞—Ç",
            description: "–ü–æ—à–∞–≥–æ–≤—ã–π —Ç—Ä–µ–Ω–∏–Ω–≥ –Ω–∞ –ø—Ä–æ–¥–æ–ª—å–Ω—ã–π —à–ø–∞–≥–∞—Ç –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö.",
            thumbnail: "./images/abstraktnaa-kompozicia-uf-ul-trafioleta (2).jpg",
            vkVideoUrl: "https://vk.com/video-123456_789012348"  // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É VK
        },
        {
            id: 5,
            title: "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–æ–±–∏–ª—å–Ω–æ—Å—Ç—å",
            description: "–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –ø–ª–µ—á–µ–≤–æ–≥–æ –ø–æ—è—Å–∞ –∏ —Ç–∞–∑–æ–±–µ–¥—Ä–µ–Ω–Ω—ã—Ö —Å—É—Å—Ç–∞–≤–æ–≤.",
            thumbnail: "https://images.unsplash.com/photo-1518611012118-696072aa579a?auto=format&fit=crop&w=600&q=80",
            vkVideoUrl: "https://vk.com/video-123456_789012349"  // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É VK
        }
    ],
    pole: [
        {
            id: 6,
            title: "Pole sport: –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å",
            description: "–ò–∑—É—á–∞–µ–º –±–∞–∑–æ–≤—ã–µ –ø–æ–¥–≤–æ–¥–∫–∏ –∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –Ω–∞ –ø–∏–ª–æ–Ω–µ.",
            thumbnail: "./images/abstraktnaa-kompozicia-uf-ul-trafioleta.jpg",
            vkVideoUrl: "https://vkvideo.ru/video-197608964_456239636"  // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É VK
        },
        {
            id: 7,
            title: "–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ –Ω–∞ —à–æ—É–∫–µ–π—Å–µ",
            description: "–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—á–µ–Ω–∏–∫–æ–≤ —Å—Ä–µ–¥–Ω–µ–π –≥—Ä—É–ø–ø—ã –Ω–∞ –æ—Ç—á–µ—Ç–Ω–æ–º –∫–æ–Ω—Ü–µ—Ä—Ç–µ.",
            thumbnail: "https://images.unsplash.com/photo-1583199542906-8a5600e3a737?auto=format&fit=crop&w=600&q=80",
            vkVideoUrl: "https://vk.com/video-123456_789012351"  // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É VK
        }
    ],
    kids: [
        {
            id: 8,
            title: "–î–µ—Ç—Å–∫–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
            description: "–†–∞–∑–º–∏–Ω–∫–∞ –∏ –∏–≥—Ä–æ–≤—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è —Ä–µ–±—è—Ç 6-8 –ª–µ—Ç.",
            thumbnail: "./images/mahonia-9895458_1280.jpg",
            vkVideoUrl: "https://vk.com/video-123456_789012352"  // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É VK
        },
        {
            id: 9,
            title: "–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–µ",
            description: "–ù–∞—à–∏ —é–Ω—ã–µ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω—ã –≤—ã—Å—Ç—É–ø–∞—é—Ç –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π.",
            thumbnail: "https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?auto=format&fit=crop&w=600&q=80",
            vkVideoUrl: "https://vk.com/video-123456_789012353"  // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É VK
        }
    ]
};

const videoFilters = [
    { key: 'all', label: '–í—Å–µ' },
    { key: 'breakdance', label: '–ë—Ä–µ–π–∫-–¥–∞–Ω—Å' },
    { key: 'stretching', label: 'Stretching' },
    { key: 'pole', label: 'Pole Sport' },
    { key: 'kids', label: '–î–µ—Ç—Å–∫–∏–µ' }
];

const videoCategoryTitles = {
    all: '–í—Å–µ –≤–∏–¥–µ–æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫',
    breakdance: '–ë—Ä–µ–π–∫-–¥–∞–Ω—Å: –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏',
    stretching: 'Stretching: —Ä–∞—Å—Ç—è–∂–∫–∞ –∏ –º–æ–±–∏–ª—å–Ω–æ—Å—Ç—å',
    pole: 'Pole Sport: —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏ —à–æ—É–∫–µ–π—Å—ã',
    kids: '–î–µ—Ç—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã: –∑–∞–Ω—è—Ç–∏—è –∏ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è'
};

/* ===== –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===== */
let currentSlide = 0;
let currentImageIndex = 0;
let currentVideoCategory = 'all';

/* 
üñº –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û –ü–†–û –ì–ê–õ–ï–†–ï–Æ –ú–û–ú–ï–ù–¢–û–í (–ë–õ–û–ö –í index.html):

- –°–µ–π—á–∞—Å —Å–µ–∫—Ü–∏—è ¬´–ì–∞–ª–µ—Ä–µ—è –º–æ–º–µ–Ω—Ç–æ–≤¬ª —Å—Ç–∞—Ç–∏—á–Ω–∞ –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–∞–∑–º–µ—Ç–∫–æ–π/—Å—Ç–∏–ª—è–º–∏.
- –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ <figure class="moment-card">...</figure> –≤ index.html.
- –ï—Å–ª–∏ —Ä–µ—à–∏—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –≤–∏–¥–µ–æ–≥–∞–ª–µ—Ä–µ—é:
    1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–±—ä–µ–∫—Ç videoCategories –∏ —Ñ—É–Ω–∫—Ü–∏–∏ openVideoModal/filterVideos.
    2. –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏, –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ.
    3. –î–æ–ø–∏—à–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ initializeScrollEffects, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
*/

/* ===== –§–£–ù–ö–¶–ò–ò –ö–ê–†–£–°–ï–õ–ò ===== */
function initializeCarousel() {
    const dotsContainer = document.getElementById('carouselDots');
    if (dotsContainer) {
        dotsContainer.innerHTML = '';
        galleryImages.forEach((_, index) => {
            const dot = document.createElement('button');
            dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
            dot.onclick = () => goToSlide(index);
            dotsContainer.appendChild(dot);
        });
    }
    updateCarouselImage();
}

function updateCarouselImage() {
    const mainImage = document.getElementById('mainImage');
    if (!mainImage) return;

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    mainImage.onerror = function() {
        console.warn(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ${this.src}`);
        // Fallback –Ω–∞ Unsplash –µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
        this.src = "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?auto=format&fit=crop&w=800&q=80";
        this.onerror = null; // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
    };

    mainImage.src = galleryImages[currentSlide].src;
    mainImage.alt = galleryImages[currentSlide].alt;

    const dots = document.querySelectorAll('.carousel-dot');
    dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlide);
    });
}

function nextSlide() {
    currentSlide = (currentSlide + 1) % galleryImages.length;
    updateCarouselImage();
}

function prevSlide() {
    currentSlide = (currentSlide - 1 + galleryImages.length) % galleryImages.length;
    updateCarouselImage();
}

function goToSlide(slideIndex) {
    currentSlide = slideIndex;
    updateCarouselImage();
}

/* ===== –§–£–ù–ö–¶–ò–ò –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê ===== */
function openModal(index) {
    currentImageIndex = index || currentSlide;
    const modal = document.getElementById('photoModal');
    const modalImage = document.getElementById('modalImage');
    const modalCounter = document.getElementById('modalCounter');

    if (!modal || !modalImage || !modalCounter) return;

    modal.classList.add('active');
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    modalImage.onerror = function() {
        console.warn(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ: ${this.src}`);
        this.src = "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?auto=format&fit=crop&w=800&q=80";
        this.onerror = null;
    };
    
    modalImage.src = galleryImages[currentImageIndex].src;
    modalImage.alt = galleryImages[currentImageIndex].alt;
    modalCounter.textContent = `${currentImageIndex + 1} / ${galleryImages.length}`;

    document.body.style.overflow = 'hidden';
}

function closeModal() {
    const modal = document.getElementById('photoModal');
    if (!modal) return;

    modal.classList.remove('active');
    document.body.style.overflow = 'auto';
}

function nextModalImage() {
    currentImageIndex = (currentImageIndex + 1) % galleryImages.length;
    updateModalImage();
}

function prevModalImage() {
    currentImageIndex = (currentImageIndex - 1 + galleryImages.length) % galleryImages.length;
    updateModalImage();
}

function updateModalImage() {
    const modalImage = document.getElementById('modalImage');
    const modalCounter = document.getElementById('modalCounter');

    if (!modalImage || !modalCounter) return;

    modalImage.onerror = function() {
        console.warn(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ: ${this.src}`);
        this.src = "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?auto=format&fit=crop&w=800&q=80";
        this.onerror = null;
    };

    modalImage.src = galleryImages[currentImageIndex].src;
    modalImage.alt = galleryImages[currentImageIndex].alt;
    modalCounter.textContent = `${currentImageIndex + 1} / ${galleryImages.length}`;
}

/* ===== –û–ë–†–ê–ë–û–¢–ö–ê –í–ò–î–ï–û ===== */
function initializeVideoHandlers() {
    const momentCards = document.querySelectorAll('.moment-card[data-video-category]');

    momentCards.forEach(card => {
        const category = card.getAttribute('data-video-category') || 'all';

        card.addEventListener('click', () => openVideoModal(category));
        card.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                openVideoModal(category);
            }
        });

        const ctaButton = card.querySelector('.moment-card-cta');
        if (ctaButton) {
            ctaButton.addEventListener('click', (event) => {
                event.preventDefault();
                openVideoModal(category);
            });
        }
    });
}

function openVideoModal(category = 'all') {
    const modal = document.getElementById('videoModal');
    const galleryGrid = document.getElementById('videoGalleryGrid');
    const filtersContainer = document.getElementById('videoFilters');
    const modalTitle = document.getElementById('videoModalTitle');

    if (!modal || !galleryGrid || !filtersContainer || !modalTitle) return;

    currentVideoCategory = category;
    modalTitle.textContent = videoCategoryTitles[category] || videoCategoryTitles.all;

    renderVideoFilters(filtersContainer, category);
    renderVideoItems(galleryGrid, category);

    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function renderVideoFilters(container, activeCategory) {
    container.innerHTML = '';

    videoFilters.forEach(filter => {
        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'video-filter-btn';
        if (filter.key === activeCategory) {
            button.classList.add('active');
        }
        button.textContent = filter.label;
        button.addEventListener('click', () => filterVideos(filter.key));
        container.appendChild(button);
    });
}

function renderVideoItems(container, category) {
    container.innerHTML = '';

    const videosToShow = category === 'all'
        ? Object.values(videoCategories).flat()
        : (videoCategories[category] || []);

    if (!videosToShow.length) {
        const emptyState = document.createElement('div');
        emptyState.className = 'video-gallery-empty';
        emptyState.textContent = '–í–∏–¥–µ–æ —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!';
        container.appendChild(emptyState);
        return;
    }

    videosToShow.forEach(video => {
        const videoItem = document.createElement('div');
        videoItem.className = 'video-gallery-item';
        videoItem.addEventListener('click', () => openVideoLink(video));

        videoItem.innerHTML = `
            <div class="video-gallery-thumb">
                <img src="${video.thumbnail}" alt="${video.title}">
                <div class="video-gallery-play-button">‚ñ∂</div>
            </div>
            <div class="video-gallery-item-content">
                <h4>${video.title}</h4>
                <p>${video.description}</p>
            </div>
        `;

        container.appendChild(videoItem);
    });
}

function filterVideos(category) {
    currentVideoCategory = category;

    const filtersContainer = document.getElementById('videoFilters');
    const galleryGrid = document.getElementById('videoGalleryGrid');
    const modalTitle = document.getElementById('videoModalTitle');

    if (!filtersContainer || !galleryGrid || !modalTitle) return;

    modalTitle.textContent = videoCategoryTitles[category] || videoCategoryTitles.all;

    renderVideoFilters(filtersContainer, category);
    renderVideoItems(galleryGrid, category);
}

function closeVideoModal() {
    const modal = document.getElementById('videoModal');
    if (!modal) return;

    modal.classList.remove('active');
    document.body.style.overflow = 'auto';
}

/* ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –í–ö–û–ù–¢–ê–ö–¢–ï ===== */
function extractVkVideoParams(vkVideoUrl) {
    if (!vkVideoUrl) {
        return null;
    }
    
    // –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Å—Å—ã–ª–æ–∫ VK:
    // https://vk.com/video-123456_789012345 (–≥—Ä—É–ø–ø–∞)
    // https://vk.com/video123456_789012345 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
    // https://vkvideo.ru/video-123456_789012345 (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
    // https://vkvideo.ru/video123456_789012345
    
    // –ò—â–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω video(-?\d+)_(\d+) –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —Å—Ç—Ä–æ–∫–∏
    const match = vkVideoUrl.match(/video(-?\d+)_(\d+)/);
    if (!match) {
        return null;
    }
    
    return {
        ownerId: match[1],  // –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –≥—Ä—É–ø–ø
        videoId: match[2]
    };
}

function getVkEmbedUrl(vkVideoUrl) {
    if (!vkVideoUrl) return null;
    
    const params = extractVkVideoParams(vkVideoUrl);
    if (!params) {
        return null;
    }
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º embed URL –¥–ª—è VK —Å –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    // - autoplay=1: –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
    // - hd=1: HD –∫–∞—á–µ—Å—Ç–≤–æ (—É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É)
    // - api=1: –≤–∫–ª—é—á–µ–Ω–∏–µ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    return `https://vk.com/video_ext.php?oid=${params.ownerId}&id=${params.videoId}&autoplay=1&hd=1&api=1`;
}

function openVideoLink(video) {
    if (!video || !video.vkVideoUrl) {
        alert('–í–∏–¥–µ–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ. –î–æ–±–∞–≤—å—Ç–µ vkVideoUrl –≤ —Ñ–∞–π–ª–µ script.js ‚Üí videoCategories.');
        return;
    }

    const embedUrl = getVkEmbedUrl(video.vkVideoUrl);
    if (!embedUrl) {
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∏–¥–µ–æ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏.\n\n–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:\n- https://vk.com/video-123456_789012345\n- https://vkvideo.ru/video-123456_789012345');
        return;
    }

    openVideoPlayer(video, embedUrl);
}

function openVideoPlayer(video, embedUrl) {
    const playerModal = document.getElementById('videoPlayerModal');
    const playerIframe = document.getElementById('videoPlayerIframe');
    const playerTitle = document.getElementById('videoPlayerTitle');

    if (!playerModal || !playerIframe) {
        console.error('–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
        return;
    }

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ä–∞–∑—É
    if (playerTitle) {
        playerTitle.textContent = video.title || '–í–∏–¥–µ–æ';
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ä–∞–∑—É
    playerModal.classList.add('active');
    document.body.style.overflow = 'hidden';

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º src iframe —Å—Ä–∞–∑—É –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
    // VK –Ω–∞—á–Ω–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤–∏–¥–µ–æ —Å—Ä–∞–∑—É –±–ª–∞–≥–æ–¥–∞—Ä—è –ø–∞—Ä–∞–º–µ—Ç—Ä—É autoplay=1 –≤ URL
    playerIframe.src = embedUrl;
}

function closeVideoPlayer() {
    const playerModal = document.getElementById('videoPlayerModal');
    const playerIframe = document.getElementById('videoPlayerIframe');

    if (!playerModal) return;

    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ
    if (playerIframe) {
        playerIframe.src = '';
    }

    playerModal.classList.remove('active');
    document.body.style.overflow = 'auto';
}

/* ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø ===== */
function initializeNavigation() {
    const navLinks = document.querySelectorAll('a[href^="#"]');

    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            const href = this.getAttribute('href');

            if (!href || href === '#') {
                e.preventDefault();
                return;
            }

            e.preventDefault();

            const targetSection = document.querySelector(href);

            if (targetSection) {
                const header = document.querySelector('.header');
                const headerHeight = header ? header.offsetHeight : 0;
                const targetPosition = targetSection.offsetTop - headerHeight;

                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });

    window.addEventListener('scroll', updateActiveNavigation);
}

function updateActiveNavigation() {
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav a[href^="#"]');

    let currentSection = '';

    sections.forEach(section => {
        const sectionTop = section.offsetTop - 200;
        const sectionHeight = section.offsetHeight;

        if (window.scrollY >= sectionTop && window.scrollY < sectionTop + sectionHeight) {
            currentSection = section.getAttribute('id');
        }
    });

    navLinks.forEach(link => {
        link.classList.remove('active');
        link.removeAttribute('aria-current');
        const href = link.getAttribute('href');
        if (href === `#${currentSection}`) {
            link.classList.add('active');
            link.setAttribute('aria-current', 'true');
        }
    });
}

/* ===== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø EMAILJS ===== */
/* 
üìß –ù–ê–°–¢–†–û–ô–ö–ê –û–¢–ü–†–ê–í–ö–ò –§–û–†–ú:

–ü–†–û–°–¢–û–ô –°–ü–û–°–û–ë (–¢–û–õ–¨–ö–û EMAIL):
–ò–∑–º–µ–Ω–∏—Ç–µ TARGET_EMAIL –Ω–∏–∂–µ –Ω–∞ –≤–∞—à email - —Ñ–æ—Ä–º–∞ –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–æ—á—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç

–ü–†–û–î–í–ò–ù–£–¢–´–ô –°–ü–û–°–û–ë (–ü–†–Ø–ú–ê–Ø –û–¢–ü–†–ê–í–ö–ê):
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://emailjs.com (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 200 –ø–∏—Å–µ–º/–º–µ—Å—è—Ü)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à email —Å–µ—Ä–≤–∏—Å (Gmail, Outlook, –∏ —Ç.–¥.)
3. –°–æ–∑–¥–∞–π—Ç–µ Email Template 
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –≤ EMAILJS_CONFIG –Ω–∏–∂–µ:
   - SERVICE_ID: ID –≤–∞—à–µ–≥–æ email —Å–µ—Ä–≤–∏—Å–∞
   - TEMPLATE_ID: ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
   - PUBLIC_KEY: –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á

–°–ú–ï–ù–ê EMAIL –ü–û–õ–£–ß–ê–¢–ï–õ–Ø:
–ò–∑–º–µ–Ω–∏—Ç–µ TARGET_EMAIL –Ω–∞ –Ω—É–∂–Ω—ã–π –∞–¥—Ä–µ—Å
*/
const EMAILJS_CONFIG = {
    SERVICE_ID: 'YOUR_SERVICE_ID',        // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à Service ID
    TEMPLATE_ID: 'YOUR_TEMPLATE_ID',      // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à Template ID  
    PUBLIC_KEY: 'YOUR_PUBLIC_KEY'         // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à Public Key
};

const TARGET_EMAIL = 'kobnuhok12@gmail.com';  // üîÑ –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® EMAIL
const BACKEND_ENDPOINT = 'https://your-backend.example.com/api/whatsapp-webhook'; // üîÑ –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à endpoint –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å

/* ===== –û–ë–†–ê–ë–û–¢–ö–ê –§–û–†–ú ===== */
function initializeFormHandlers() {
    const form = document.querySelector('.form');

    if (form) {
        form.addEventListener('submit', handleFormSubmit);
    }
}

function handleFormSubmit(event) {
    event.preventDefault();

    const formData = new FormData(event.target);
    const name = formData.get('name') || event.target[0].value;
    const phone = formData.get('phone') || event.target[1].value;
    const email = formData.get('email') || event.target[2].value;
    const message = formData.get('message') || event.target[3].value;
    const consent = formData.get('consent');

    if (!name || !phone || !email) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
        return;
    }

    if (!consent) {
        alert('–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–∞—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.');
        return;
    }

    const submissionPayload = {
        name,
        phone,
        email,
        message,
        consentGiven: true,
        submittedAt: new Date().toISOString()
    };

    sendEmail(name, phone, email, message, event.target, submissionPayload);
}

function sendEmail(name, phone, email, message, form, submissionPayload) {
    if (EMAILJS_CONFIG.SERVICE_ID === 'YOUR_SERVICE_ID') {
        sendEmailFallback(name, phone, email, message, form, submissionPayload);
        return;
    }

    const submitButton = form.querySelector('button[type="submit"]');
    const originalText = submitButton.textContent;
    submitButton.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';
    submitButton.disabled = true;

    const templateParams = {
        to_email: TARGET_EMAIL,
        from_name: name,
        from_phone: phone,
        from_email: email,
        message: message,
        date: new Date().toLocaleString('ru-RU')
    };

    emailjs.send(EMAILJS_CONFIG.SERVICE_ID, EMAILJS_CONFIG.TEMPLATE_ID, templateParams, EMAILJS_CONFIG.PUBLIC_KEY)
        .then(function(response) {
            console.log('SUCCESS!', response.status, response.text);
            alert('–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞—è–≤–∫—É! –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
            form.reset();
            notifyBackend(submissionPayload);
        })
        .catch(function(error) {
            console.log('FAILED...', error);
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É.');
        })
        .finally(function() {
            submitButton.textContent = originalText;
            submitButton.disabled = false;
        });
}

function sendEmailFallback(name, phone, email, message, form, submissionPayload) {
    const subject = encodeURIComponent('–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞ Steel Brothers');
    const body = encodeURIComponent(`
–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞ Steel Brothers:

–ò–º—è: ${name}
–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}
Email: ${email}
–°–æ–æ–±—â–µ–Ω–∏–µ: ${message}

–î–∞—Ç–∞: ${new Date().toLocaleString('ru-RU')}
    `);

    const mailtoLink = `mailto:${TARGET_EMAIL}?subject=${subject}&body=${body}`;
    window.open(mailtoLink);
    alert('EmailJS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–∞—à –ø–æ—á—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.');
    form.reset();
    notifyBackend(submissionPayload);
}

function notifyBackend(payload) {
    if (!BACKEND_ENDPOINT || BACKEND_ENDPOINT.includes('your-backend.example.com')) {
        console.warn('BACKEND_ENDPOINT –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –£–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ WhatsApp.');
        return;
    }

    fetch(BACKEND_ENDPOINT, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
    })
        .then((response) => {
            if (!response.ok) {
                throw new Error(`Backend responded with status ${response.status}`);
            }
            console.log('Backend notified successfully');
        })
        .catch((error) => {
            console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ backend –¥–ª—è WhatsApp:', error);
        });
}

/* ===== –≠–§–§–ï–ö–¢–´ –ü–†–û–ö–†–£–¢–ö–ò ===== */
function initializeScrollEffects() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    const elementsToAnimate = document.querySelectorAll('.direction-card, .review-item, .moment-card');

    elementsToAnimate.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
    });
}

/* ===== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ö–õ–ê–í–ò–ê–¢–£–†–û–ô ===== */
document.addEventListener('keydown', function(e) {
    const photoModal = document.getElementById('photoModal');
    const videoModal = document.getElementById('videoModal');
    const videoPlayerModal = document.getElementById('videoPlayerModal');

    if (photoModal && photoModal.classList.contains('active')) {
        if (e.key === 'Escape') {
            closeModal();
        } else if (e.key === 'ArrowRight') {
            nextModalImage();
        } else if (e.key === 'ArrowLeft') {
            prevModalImage();
        }
    }

    if (videoModal && videoModal.classList.contains('active') && e.key === 'Escape') {
        closeVideoModal();
    }

    if (videoPlayerModal && videoPlayerModal.classList.contains('active') && e.key === 'Escape') {
        closeVideoPlayer();
    }
});

/* ===== –°–ï–ù–°–û–†–ù–´–ï –ñ–ï–°–¢–´ –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• –£–°–¢–†–û–ô–°–¢–í ===== */
let touchStartX = 0;
let touchEndX = 0;

document.addEventListener('touchstart', function(e) {
    const modal = document.getElementById('photoModal');
    if (modal && modal.classList.contains('active')) {
        touchStartX = e.changedTouches[0].screenX;
    }
});

document.addEventListener('touchend', function(e) {
    const modal = document.getElementById('photoModal');
    if (modal && modal.classList.contains('active')) {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    }
});

function handleSwipe() {
    const swipeThreshold = 50;
    const diff = touchStartX - touchEndX;

    if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0) {
            nextModalImage();
        } else {
            prevModalImage();
        }
    }
}

/* ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===== */
document.addEventListener('DOMContentLoaded', function() {
    console.log('Steel Brothers website loaded successfully!');

    if (typeof emailjs !== 'undefined' && EMAILJS_CONFIG.PUBLIC_KEY !== 'YOUR_PUBLIC_KEY') {
        emailjs.init(EMAILJS_CONFIG.PUBLIC_KEY);
    }

    initializeCarousel();
    initializeNavigation();
    initializeFormHandlers();
    initializeVideoHandlers();
    initializeScrollEffects();
});
